# Happy Vibe 用户指南

## 目录

- [安装步骤](#安装步骤)
- [基本操作](#基本操作)
- [能量系统](#能量系统)
- [农场系统](#农场系统)
- [社交功能](#社交功能)
- [常见问题](#常见问题)

---

## 安装步骤

### 系统要求

| 组件 | 最低要求 |
|------|----------|
| 操作系统 | Windows 10 / macOS 10.15 / Linux |
| Python | 3.11 或更高版本 |
| 内存 | 4GB RAM |
| 存储 | 500MB 可用空间 |

### 安装 VibeHub 服务

VibeHub 是 Happy Vibe 的核心服务，负责追踪你的编程活动并计算能量。

```bash
# 1. 进入 vibehub 目录
cd vibehub

# 2. 创建虚拟环境
uv venv

# 3. 安装依赖
uv pip install -e ".[dev]"

# 4. 启动服务
python -m src.main
```

启动成功后，你会看到：
```
INFO:     Uvicorn running on http://127.0.0.1:8765
INFO:     Application startup complete.
```

### 安装桌面监控器 (可选)

桌面监控器在系统托盘运行，提供实时通知。

```bash
cd monitor
uv venv
uv pip install -e ".[dev]"
happy-vibe-monitor
```

### 运行游戏客户端

1. 下载并安装 [Godot Engine 4.2+](https://godotengine.org/download)
2. 打开 Godot，导入 `game/project.godot`
3. 点击运行按钮启动游戏

---

## 基本操作

### 首次启动

1. 启动 VibeHub 服务
2. 启动游戏客户端
3. 创建你的角色
4. 进入你的农场

### 游戏界面

```
┌─────────────────────────────────────────┐
│  能量: ⚡ 1250    金币: 💰 500          │
├─────────────────────────────────────────┤
│                                         │
│           [游戏主画面]                   │
│                                         │
│     🏠 农场    🌱 作物    🏪 商店       │
│                                         │
├─────────────────────────────────────────┤
│  [快捷栏]  1  2  3  4  5  6  7  8  9    │
└─────────────────────────────────────────┘
```

### 基本控制

| 操作 | 按键 |
|------|------|
| 移动 | WASD 或方向键 |
| 交互 | E 或 Enter |
| 打开背包 | I |
| 打开地图 | M |
| 暂停菜单 | ESC |

---

## 能量系统

### 什么是 Vibe 能量？

Vibe 能量是游戏的核心资源，通过你的真实编程活动获得。

### 能量计算公式

```
总能量 = 基础能量 × 时间加成 × 质量加成 × 心流加成
```

| 因素 | 说明 |
|------|------|
| 基础能量 | 每分钟编程获得 1 点基础能量 |
| 时间加成 | 连续编程时间越长，加成越高 (最高 2x) |
| 质量加成 | 代码质量评分影响加成 (0.5x - 1.5x) |
| 心流加成 | 进入心流状态时获得额外加成 (最高 3x) |

### 心流状态

当你持续专注编程时，系统会检测到心流状态：

- **普通状态**: 1x 加成
- **专注状态**: 1.5x 加成 (连续编程 15 分钟)
- **心流状态**: 2x 加成 (连续编程 30 分钟)
- **超级心流**: 3x 加成 (连续编程 60 分钟)

### 能量用途

- 种植代码作物
- 建造和升级建筑
- 购买商店物品
- 参与 PVP 竞技

---

## 农场系统

### 种植作物

1. 在商店购买种子
2. 选择空地块
3. 种下种子
4. 等待作物成熟
5. 收获并出售

### 作物类型

| 作物 | 成熟时间 | 售价 | 解锁条件 |
|------|----------|------|----------|
| 变量草 | 1 小时 | 10 💰 | 初始 |
| 函数花 | 4 小时 | 50 💰 | 等级 5 |
| 类树 | 12 小时 | 200 💰 | 等级 10 |
| 模块果 | 24 小时 | 500 💰 | 等级 20 |

### 建筑系统

| 建筑 | 功能 | 花费 |
|------|------|------|
| 仓库 | 增加存储空间 | 1000 💰 |
| 温室 | 加速作物生长 | 2500 💰 |
| 工作室 | 解锁高级功能 | 5000 💰 |

---

## 社交功能

### 好友系统

- 添加好友：输入好友 ID 或扫描二维码
- 访问好友农场
- 互赠礼物

### 公会

- 加入或创建公会
- 参与公会任务
- 公会战争

### 排行榜

| 排行榜 | 说明 |
|--------|------|
| 能量榜 | 累计获得能量排名 |
| 财富榜 | 金币总量排名 |
| 成就榜 | 成就点数排名 |
| 公会榜 | 公会综合实力排名 |

---

## 常见问题

### Q: 服务无法启动？

检查端口 8765 是否被占用：
```bash
# Windows
netstat -ano | findstr 8765

# macOS/Linux
lsof -i :8765
```

### Q: 能量没有增加？

1. 确认 VibeHub 服务正在运行
2. 检查 Claude Code 日志路径是否正确
3. 确认你正在进行编程活动

### Q: 游戏无法连接服务？

1. 确认 VibeHub 服务已启动
2. 检查防火墙设置
3. 确认服务地址配置正确 (默认 127.0.0.1:8765)

### Q: 如何备份存档？

存档位置：
- Windows: `%USERPROFILE%\.happy-vibe\saves\`
- macOS: `~/Library/Application Support/HappyVibe/saves/`
- Linux: `~/.local/share/happy-vibe/saves/`

### Q: 如何重置游戏？

删除存档目录即可重置游戏。注意：此操作不可恢复。

---

## 获取帮助

- GitHub Issues: [提交问题](https://github.com/your-username/Happy-Vibe/issues)
- 文档: [开发者指南](developer-guide.md)
